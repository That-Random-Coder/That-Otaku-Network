<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Service Test Frontend</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        min-height: 100vh;
        color: #fff;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        text-align: center;
        padding: 30px 0;
        border-bottom: 2px solid #e94560;
        margin-bottom: 30px;
      }

      header h1 {
        color: #e94560;
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      header p {
        color: #a0a0a0;
      }

      .config-section {
        background: #0f3460;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
      }

      .config-section h3 {
        color: #e94560;
        margin-bottom: 15px;
      }

      .config-row {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
      }

      .config-row label {
        color: #a0a0a0;
      }

      .config-row input {
        flex: 1;
        min-width: 300px;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        background: #1a1a2e;
        color: #fff;
        font-size: 14px;
      }

      .tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
      }

      .tab-btn {
        padding: 12px 24px;
        background: #0f3460;
        border: none;
        border-radius: 8px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 14px;
      }

      .tab-btn:hover {
        background: #e94560;
      }

      .tab-btn.active {
        background: #e94560;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .card {
        background: #0f3460;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
      }

      .card h3 {
        color: #e94560;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .card .method {
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
      }

      .method.get {
        background: #61affe;
      }
      .method.post {
        background: #49cc90;
      }
      .method.put {
        background: #fca130;
      }
      .method.delete {
        background: #f93e3e;
      }

      .card .endpoint {
        color: #a0a0a0;
        font-family: monospace;
        margin-bottom: 20px;
        font-size: 14px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        color: #a0a0a0;
        font-size: 14px;
      }

      .form-group input,
      .form-group textarea,
      .form-group select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #1a1a2e;
        border-radius: 8px;
        background: #1a1a2e;
        color: #fff;
        font-size: 14px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group textarea:focus,
      .form-group select:focus {
        outline: none;
        border-color: #e94560;
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      .form-group select[multiple] {
        min-height: 120px;
      }

      .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
      }

      .btn {
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .btn-primary {
        background: #e94560;
        color: #fff;
      }

      .btn-primary:hover {
        background: #ff6b6b;
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: #1a1a2e;
        color: #fff;
      }

      .btn-secondary:hover {
        background: #2a2a3e;
      }

      .response-section {
        margin-top: 20px;
        padding: 20px;
        background: #1a1a2e;
        border-radius: 10px;
      }

      .response-section h4 {
        color: #e94560;
        margin-bottom: 10px;
      }

      .response-content {
        background: #0d0d1a;
        padding: 15px;
        border-radius: 8px;
        font-family: "Consolas", monospace;
        font-size: 13px;
        overflow-x: auto;
        white-space: pre-wrap;
        word-break: break-all;
        max-height: 400px;
        overflow-y: auto;
      }

      .response-content.success {
        border-left: 4px solid #49cc90;
      }

      .response-content.error {
        border-left: 4px solid #f93e3e;
      }

      .status-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        margin-bottom: 10px;
      }

      .status-badge.success {
        background: #49cc90;
        color: #000;
      }
      .status-badge.error {
        background: #f93e3e;
        color: #fff;
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .content-card {
        background: #1a1a2e;
        border-radius: 10px;
        overflow: hidden;
      }

      .content-card img,
      .content-card video {
        width: 100%;
        height: 200px;
        object-fit: cover;
      }

      .content-card .content-info {
        padding: 15px;
      }

      .content-card h4 {
        color: #e94560;
        margin-bottom: 5px;
      }

      .content-card .meta {
        color: #a0a0a0;
        font-size: 12px;
        margin-bottom: 10px;
      }

      .content-card .stats {
        display: flex;
        gap: 15px;
        color: #a0a0a0;
        font-size: 13px;
      }

      .content-card .actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .content-card .actions button {
        flex: 1;
        padding: 8px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s;
      }

      .like-btn {
        background: #49cc90;
        color: #000;
      }
      .dislike-btn {
        background: #fca130;
        color: #000;
      }
      .comment-btn {
        background: #61affe;
        color: #000;
      }
      .delete-btn {
        background: #f93e3e;
        color: #fff;
      }

      .loader {
        display: none;
        width: 20px;
        height: 20px;
        border: 2px solid #fff;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-left: 10px;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .comments-list {
        margin-top: 15px;
      }

      .comment-item {
        background: #1a1a2e;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
      }

      .comment-item .comment-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .comment-item .username {
        color: #e94560;
        font-weight: 600;
      }

      .comment-item .time {
        color: #a0a0a0;
        font-size: 12px;
      }

      .comment-item .comment-text {
        color: #fff;
      }

      .file-input-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
        width: 100%;
      }

      .file-input-wrapper input[type="file"] {
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        cursor: pointer;
        width: 100%;
        height: 100%;
      }

      .file-input-label {
        display: block;
        padding: 40px;
        background: #1a1a2e;
        border: 2px dashed #e94560;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .file-input-label:hover {
        background: #2a2a3e;
      }

      .file-preview {
        margin-top: 10px;
        max-width: 200px;
        border-radius: 8px;
      }

      .pagination {
        display: flex;
        gap: 10px;
        margin-top: 20px;
        justify-content: center;
      }

      .pagination button {
        padding: 8px 16px;
        background: #0f3460;
        border: none;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
      }

      .pagination button:hover {
        background: #e94560;
      }

      .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .helper-text {
        font-size: 12px;
        color: #a0a0a0;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üé¨ Content Service Test Frontend</h1>
        <p>AnimeVerse Content Service API Testing Interface</p>
      </header>

      <div class="config-section">
        <h3>‚öôÔ∏è API Configuration (via API Gateway)</h3>
        <div class="config-row" style="margin-bottom: 15px">
          <label>API Gateway URL:</label>
          <input
            type="text"
            id="baseUrl"
            value="http://localhost:11111"
            placeholder="http://localhost:11111"
          />
          <button class="btn btn-secondary" onclick="testConnection()">
            Test Connection
          </button>
        </div>
        <div class="config-row" style="margin-bottom: 15px">
          <label>Default User ID:</label>
          <input
            type="text"
            id="defaultUserId"
            value="79e4aef7-914f-468f-8d86-4c9869773b9c"
            placeholder="UUID format"
          />
          <button class="btn btn-secondary" onclick="fillAllUserIds()">
            Fill All Forms
          </button>
        </div>
        <div class="config-row">
          <label>JWT Token:</label>
          <input
            type="text"
            id="jwtToken"
            value="eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInR5cGUiOiJBQ0NFU1MiLCJzdWIiOiI3OWU0YWVmNy05MTRmLTQ2OGYtOGQ4Ni00Yzk4Njk3NzNiOWMiLCJpYXQiOjE3NjY0OTg2OTUsImV4cCI6MTc2OTA5MDY5NX0.FzFgNYHw8rXNFqsAxlPIpvCmEXzewlloo-nG5ueJGVg"
            placeholder="Bearer token"
          />
        </div>
        <p class="helper-text" style="margin-top: 10px">
          All requests go through API Gateway at /api/content/* with
          Authorization header
        </p>
      </div>

      <div class="tabs">
        <button class="tab-btn active" onclick="showTab('create')">
          üìù Create Content
        </button>
        <button class="tab-btn" onclick="showTab('get')">üìñ Get Content</button>
        <button class="tab-btn" onclick="showTab('user')">
          üë§ User Contents
        </button>
        <button class="tab-btn" onclick="showTab('batch')">üì¶ Batch Get</button>
        <button class="tab-btn" onclick="showTab('interactions')">
          üëç Interactions
        </button>
        <button class="tab-btn" onclick="showTab('comments')">
          üí¨ Comments
        </button>
        <button class="tab-btn" onclick="showTab('manage')">üîß Manage</button>
      </div>

      <div id="create" class="tab-content active">
        <div class="card">
          <h3><span class="method post">POST</span> Create Content</h3>
          <p class="endpoint">/content/create</p>

          <form id="createContentForm" onsubmit="createContent(event)">
            <div class="form-row">
              <div class="form-group">
                <label>Title *</label>
                <input
                  type="text"
                  id="create_title"
                  required
                  placeholder="Enter content title"
                />
              </div>
              <div class="form-group">
                <label>User ID *</label>
                <input
                  type="text"
                  id="create_userId"
                  required
                  placeholder="UUID format"
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Username *</label>
                <input
                  type="text"
                  id="create_userName"
                  required
                  placeholder="Username"
                />
              </div>
              <div class="form-group">
                <label>Display Name *</label>
                <input
                  type="text"
                  id="create_displayName"
                  required
                  placeholder="Display name"
                />
              </div>
            </div>

            <div class="form-group">
              <label>Bio/Description *</label>
              <textarea
                id="create_bio"
                required
                placeholder="Enter content description"
              ></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Anime Categories * (Hold Ctrl to select multiple)</label>
                <select id="create_categories" multiple required>
                  <option value="MEME">MEME</option>
                  <option value="FUNNY">FUNNY</option>
                  <option value="DISCUSSION">DISCUSSION</option>
                  <option value="QUESTION">QUESTION</option>
                  <option value="OPINION">OPINION</option>
                  <option value="REVIEW">REVIEW</option>
                  <option value="ANALYSIS">ANALYSIS</option>
                  <option value="NEWS">NEWS</option>
                  <option value="CLIP">CLIP</option>
                  <option value="FAN_ART">FAN_ART</option>
                  <option value="EDIT">EDIT</option>
                  <option value="COSPLAY">COSPLAY</option>
                  <option value="SLICE_OF_LIFE">SLICE_OF_LIFE</option>
                  <option value="STORY">STORY</option>
                  <option value="ROMANCE">ROMANCE</option>
                  <option value="ECCHI">ECCHI</option>
                  <option value="META">META</option>
                </select>
              </div>
              <div class="form-group">
                <label>Genres * (Hold Ctrl to select multiple)</label>
                <select id="create_genres" multiple required>
                  <option value="ACTION">ACTION</option>
                  <option value="ADVENTURE">ADVENTURE</option>
                  <option value="COMEDY">COMEDY</option>
                  <option value="DRAMA">DRAMA</option>
                  <option value="FANTASY">FANTASY</option>
                  <option value="SCI_FI">SCI_FI</option>
                  <option value="SLICE_OF_LIFE">SLICE_OF_LIFE</option>
                  <option value="ROMANCE">ROMANCE</option>
                  <option value="HORROR">HORROR</option>
                  <option value="MYSTERY">MYSTERY</option>
                  <option value="THRILLER">THRILLER</option>
                  <option value="SUPERNATURAL">SUPERNATURAL</option>
                  <option value="PSYCHOLOGICAL">PSYCHOLOGICAL</option>
                  <option value="SPORTS">SPORTS</option>
                  <option value="MUSIC">MUSIC</option>
                  <option value="MECHA">MECHA</option>
                  <option value="HISTORICAL">HISTORICAL</option>
                  <option value="MILITARY">MILITARY</option>
                  <option value="ECCHI">ECCHI</option>
                  <option value="HAREM">HAREM</option>
                  <option value="ISEKAI">ISEKAI</option>
                  <option value="MAGIC">MAGIC</option>
                  <option value="SCHOOL">SCHOOL</option>
                  <option value="DEMON">DEMON</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>Tags * (comma-separated)</label>
              <input
                type="text"
                id="create_tags"
                required
                placeholder="anime, naruto, action"
              />
            </div>

            <div class="form-group">
              <label>Media File *</label>
              <div class="file-input-wrapper">
                <label class="file-input-label" id="fileLabel">
                  üìÅ Click to upload image or video
                </label>
                <input
                  type="file"
                  id="create_media"
                  accept="image/*,video/*"
                  required
                  onchange="previewFile(this)"
                />
              </div>
              <img
                id="mediaPreview"
                class="file-preview"
                style="display: none"
              />
              <video
                id="videoPreview"
                class="file-preview"
                style="display: none"
                controls
              ></video>
            </div>

            <button type="submit" class="btn btn-primary">
              Create Content
            </button>
          </form>

          <div class="response-section">
            <h4>Response</h4>
            <div id="createResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>
      </div>

      <div id="get" class="tab-content">
        <div class="card">
          <h3><span class="method get">GET</span> Get Content by ID</h3>
          <p class="endpoint">/content/get</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="get_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>Current User ID (optional)</label>
              <input
                type="text"
                id="get_currentUserId"
                placeholder="UUID format"
              />
            </div>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="get_includeMedia" checked /> Include
              Media
            </label>
          </div>
          <button class="btn btn-primary" onclick="getContentById()">
            Get Content
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="getResponse" class="response-content">
              Response will appear here...
            </div>
          </div>

          <div id="contentDisplay"></div>
        </div>
      </div>

      <div id="user" class="tab-content">
        <div class="card">
          <h3><span class="method get">GET</span> Get Contents by User ID</h3>
          <p class="endpoint">/content/user</p>

          <div class="form-row">
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="user_userId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>Current User ID (optional)</label>
              <input
                type="text"
                id="user_currentUserId"
                placeholder="UUID format"
              />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Page</label>
              <input type="number" id="user_page" value="0" min="0" />
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" id="user_includeMedia" checked /> Include
                Media
              </label>
            </div>
          </div>
          <button class="btn btn-primary" onclick="getContentsByUserId()">
            Get User Contents
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="userResponse" class="response-content">
              Response will appear here...
            </div>
          </div>

          <div id="userContentsDisplay" class="content-grid"></div>
        </div>
      </div>

      <div id="batch" class="tab-content">
        <div class="card">
          <h3>
            <span class="method get">GET</span> Get Contents by IDs (Batch)
          </h3>
          <p class="endpoint">/content/get/batch</p>

          <div class="form-group">
            <label>Content IDs * (comma-separated UUIDs)</label>
            <textarea
              id="batch_contentIds"
              placeholder="uuid1, uuid2, uuid3"
            ></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Current User ID (optional)</label>
              <input
                type="text"
                id="batch_currentUserId"
                placeholder="UUID format"
              />
            </div>
            <div class="form-group">
              <label>Page</label>
              <input type="number" id="batch_page" value="0" min="0" />
            </div>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="batch_includeMedia" checked /> Include
              Media
            </label>
          </div>
          <button class="btn btn-primary" onclick="getContentsByIds()">
            Get Contents
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="batchResponse" class="response-content">
              Response will appear here...
            </div>
          </div>

          <div id="batchContentsDisplay" class="content-grid"></div>
        </div>
      </div>

      <div id="interactions" class="tab-content">

        <div class="card">
          <h3><span class="method post">POST</span> Like Content</h3>
          <p class="endpoint">/content/like</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="like_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="like_userId"
                placeholder="UUID format"
                required
              />
            </div>
          </div>
          <button class="btn btn-primary" onclick="likeContent()">
            üëç Like
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="likeResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3><span class="method post">POST</span> Dislike Content</h3>
          <p class="endpoint">/content/dislike</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="dislike_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="dislike_userId"
                placeholder="UUID format"
                required
              />
            </div>
          </div>
          <button class="btn btn-primary" onclick="dislikeContent()">
            üëé Dislike
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="dislikeResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3><span class="method delete">DELETE</span> Remove Like/Dislike</h3>
          <p class="endpoint">/content/like-dislike/remove</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="removeLike_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="removeLike_userId"
                placeholder="UUID format"
                required
              />
            </div>
          </div>
          <button class="btn btn-primary" onclick="removeLikeDislike()">
            üóëÔ∏è Remove
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="removeLikeResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3><span class="method post">POST</span> Share Content</h3>
          <p class="endpoint">/content/share</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="share_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="share_userId"
                placeholder="UUID format"
                required
              />
            </div>
          </div>
          <button class="btn btn-primary" onclick="shareContent()">
            üîó Share
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="shareResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>
      </div>

      <div id="comments" class="tab-content">

        <div class="card">
          <h3><span class="method post">POST</span> Add Comment</h3>
          <p class="endpoint">/content/comment/add</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="comment_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>User ID *</label>
              <input
                type="text"
                id="comment_userId"
                placeholder="UUID format"
                required
              />
            </div>
          </div>
          <div class="form-group">
            <label>Username *</label>
            <input
              type="text"
              id="comment_userName"
              placeholder="Username"
              required
            />
          </div>
          <div class="form-group">
            <label>Comment *</label>
            <textarea
              id="comment_text"
              placeholder="Enter your comment"
              required
            ></textarea>
          </div>
          <button class="btn btn-primary" onclick="addComment()">
            üí¨ Add Comment
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="addCommentResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3>
            <span class="method get">GET</span> Get Comments by Content ID
          </h3>
          <p class="endpoint">/content/comments</p>

          <div class="form-row">
            <div class="form-group">
              <label>Content ID *</label>
              <input
                type="text"
                id="getComments_contentId"
                placeholder="UUID format"
                required
              />
            </div>
            <div class="form-group">
              <label>Page</label>
              <input type="number" id="getComments_page" value="0" min="0" />
            </div>
          </div>
          <button class="btn btn-primary" onclick="getComments()">
            üìñ Get Comments
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="getCommentsResponse" class="response-content">
              Response will appear here...
            </div>
          </div>

          <div id="commentsList" class="comments-list"></div>
        </div>
      </div>

      <div id="manage" class="tab-content">

        <div class="card">
          <h3><span class="method put">PUT</span> Enable Content</h3>
          <p class="endpoint">/content/enable</p>

          <div class="form-group">
            <label>Content ID *</label>
            <input
              type="text"
              id="enable_contentId"
              placeholder="UUID format"
              required
            />
          </div>
          <button class="btn btn-primary" onclick="enableContent()">
            ‚úÖ Enable
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="enableResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3><span class="method put">PUT</span> Disable Content</h3>
          <p class="endpoint">/content/disable</p>

          <div class="form-group">
            <label>Content ID *</label>
            <input
              type="text"
              id="disable_contentId"
              placeholder="UUID format"
              required
            />
          </div>
          <button class="btn btn-primary" onclick="disableContent()">
            üö´ Disable
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="disableResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>

        <div class="card">
          <h3><span class="method delete">DELETE</span> Delete Content</h3>
          <p class="endpoint">/content/delete</p>

          <div class="form-group">
            <label>Content ID *</label>
            <input
              type="text"
              id="delete_contentId"
              placeholder="UUID format"
              required
            />
          </div>
          <button class="btn btn-primary" onclick="deleteContent()">
            üóëÔ∏è Delete
          </button>

          <div class="response-section">
            <h4>Response</h4>
            <div id="deleteResponse" class="response-content">
              Response will appear here...
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>

      function getBaseUrl() {
        return (
          document.getElementById("baseUrl").value.trim().replace(/\/$/, "") +
          "/api/content/content"
        );
      }

      function getAuthToken() {
        return document.getElementById("jwtToken").value.trim();
      }

      function getHeaders(includeContentType = true) {
        const headers = {
          Authorization: `Bearer ${getAuthToken()}`,
        };
        if (includeContentType) {
          headers["Content-Type"] = "application/json";
        }
        return headers;
      }

      function fillAllUserIds() {
        const defaultUserId = document.getElementById("defaultUserId").value;
        const userIdFields = [
          "create_userId",
          "get_currentUserId",
          "user_userId",
          "user_currentUserId",
          "batch_currentUserId",
          "like_userId",
          "like_contentId",
          "dislike_userId",
          "removeLike_userId",
          "share_userId",
          "comment_userId",
        ];
        userIdFields.forEach((fieldId) => {
          const field = document.getElementById(fieldId);
          if (field && fieldId.includes("userId")) {
            field.value = defaultUserId;
          }
        });
        alert("‚úÖ User ID filled in all forms!");
      }

      function showTab(tabName) {
        document
          .querySelectorAll(".tab-content")
          .forEach((tab) => tab.classList.remove("active"));
        document
          .querySelectorAll(".tab-btn")
          .forEach((btn) => btn.classList.remove("active"));

        document.getElementById(tabName).classList.add("active");
        event.target.classList.add("active");
      }

      function displayResponse(elementId, response, isSuccess) {
        const element = document.getElementById(elementId);
        element.className = `response-content ${
          isSuccess ? "success" : "error"
        }`;
        element.innerHTML = `<span class="status-badge ${
          isSuccess ? "success" : "error"
        }">${isSuccess ? "SUCCESS" : "ERROR"}</span>\n${JSON.stringify(
          response,
          null,
          2
        )}`;
      }

      async function testConnection() {
        try {
          const baseGateway = document
            .getElementById("baseUrl")
            .value.trim()
            .replace(/\/$/, "");
          const response = await fetch(`${baseGateway}/actuator/health`, {
            method: "GET",
            mode: "cors",
            headers: getHeaders(false),
          });
          if (response.ok) {
            alert("‚úÖ Connection to API Gateway successful!");
          } else {
            alert("‚ö†Ô∏è Server responded but with status: " + response.status);
          }
        } catch (error) {
          alert("‚ùå Connection failed: " + error.message);
        }
      }

      function previewFile(input) {
        const file = input.files[0];
        if (file) {
          document.getElementById("fileLabel").textContent = `üìÅ ${file.name}`;

          const reader = new FileReader();
          const isVideo = file.type.startsWith("video/");

          if (isVideo) {
            document.getElementById("mediaPreview").style.display = "none";
            document.getElementById("videoPreview").style.display = "block";
            document.getElementById("videoPreview").src =
              URL.createObjectURL(file);
          } else {
            document.getElementById("videoPreview").style.display = "none";
            document.getElementById("mediaPreview").style.display = "block";
            reader.onload = (e) =>
              (document.getElementById("mediaPreview").src = e.target.result);
            reader.readAsDataURL(file);
          }
        }
      }

      async function createContent(event) {
        event.preventDefault();

        const formData = new FormData();

        const request = {
          title: document.getElementById("create_title").value,
          userID: document.getElementById("create_userId").value,
          userName: document.getElementById("create_userName").value,
          displayName: document.getElementById("create_displayName").value,
          bio: document.getElementById("create_bio").value,
          animeCategories: Array.from(
            document.getElementById("create_categories").selectedOptions
          ).map((o) => o.value),
          genres: Array.from(
            document.getElementById("create_genres").selectedOptions
          ).map((o) => o.value),
          tags: document
            .getElementById("create_tags")
            .value.split(",")
            .map((t) => t.trim())
            .filter((t) => t),
        };

        formData.append(
          "request",
          new Blob([JSON.stringify(request)], { type: "application/json" })
        );
        formData.append(
          "media",
          document.getElementById("create_media").files[0]
        );

        try {
          const response = await fetch(`${getBaseUrl()}/create`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${getAuthToken()}`,
            },
            body: formData,
          });

          const data = await response.json();
          displayResponse("createResponse", data, response.ok);
        } catch (error) {
          displayResponse("createResponse", { error: error.message }, false);
        }
      }

      async function getContentById() {
        const contentId = document.getElementById("get_contentId").value;
        const currentUserId =
          document.getElementById("get_currentUserId").value;
        const includeMedia =
          document.getElementById("get_includeMedia").checked;

        let url = `${getBaseUrl()}/get?contentId=${contentId}&includeMedia=${includeMedia}`;
        if (currentUserId) url += `&currentUserId=${currentUserId}`;

        try {
          const response = await fetch(url, {
            headers: getHeaders(false),
          });
          const data = await response.json();
          displayResponse("getResponse", data, response.ok);

          if (response.ok) {
            displayContentCard("contentDisplay", data);
          }
        } catch (error) {
          displayResponse("getResponse", { error: error.message }, false);
        }
      }

      async function getContentsByUserId() {
        const userId = document.getElementById("user_userId").value;
        const currentUserId =
          document.getElementById("user_currentUserId").value;
        const page = document.getElementById("user_page").value;
        const includeMedia =
          document.getElementById("user_includeMedia").checked;

        let url = `${getBaseUrl()}/user?userId=${userId}&page=${page}&includeMedia=${includeMedia}`;
        if (currentUserId) url += `&currentUserId=${currentUserId}`;

        try {
          const response = await fetch(url, {
            headers: getHeaders(false),
          });
          const data = await response.json();
          displayResponse("userResponse", data, response.ok);

          if (response.ok && data.content) {
            displayContentGrid("userContentsDisplay", data.content);
          }
        } catch (error) {
          displayResponse("userResponse", { error: error.message }, false);
        }
      }

      async function getContentsByIds() {
        const contentIds = document
          .getElementById("batch_contentIds")
          .value.split(",")
          .map((id) => id.trim())
          .filter((id) => id);
        const currentUserId = document.getElementById(
          "batch_currentUserId"
        ).value;
        const page = document.getElementById("batch_page").value;
        const includeMedia =
          document.getElementById("batch_includeMedia").checked;

        let url = `${getBaseUrl()}/get/batch?contentIds=${contentIds.join(
          ","
        )}&page=${page}&includeMedia=${includeMedia}`;
        if (currentUserId) url += `&currentUserId=${currentUserId}`;

        try {
          const response = await fetch(url, {
            headers: getHeaders(false),
          });
          const data = await response.json();
          displayResponse("batchResponse", data, response.ok);

          if (response.ok && data.content) {
            displayContentGrid("batchContentsDisplay", data.content);
          }
        } catch (error) {
          displayResponse("batchResponse", { error: error.message }, false);
        }
      }

      async function likeContent() {
        const body = {
          contentId: document.getElementById("like_contentId").value,
          userId: document.getElementById("like_userId").value,
        };

        try {
          const response = await fetch(`${getBaseUrl()}/like`, {
            method: "POST",
            headers: getHeaders(),
            body: JSON.stringify(body),
          });

          const text = await response.text();
          const data = text ? JSON.parse(text) : { message: "Success" };
          displayResponse("likeResponse", data, response.ok);
        } catch (error) {
          displayResponse("likeResponse", { error: error.message }, false);
        }
      }

      async function dislikeContent() {
        const body = {
          contentId: document.getElementById("dislike_contentId").value,
          userId: document.getElementById("dislike_userId").value,
        };

        try {
          const response = await fetch(`${getBaseUrl()}/dislike`, {
            method: "POST",
            headers: getHeaders(),
            body: JSON.stringify(body),
          });

          const text = await response.text();
          const data = text ? JSON.parse(text) : { message: "Success" };
          displayResponse("dislikeResponse", data, response.ok);
        } catch (error) {
          displayResponse("dislikeResponse", { error: error.message }, false);
        }
      }

      async function removeLikeDislike() {
        const body = {
          contentId: document.getElementById("removeLike_contentId").value,
          userId: document.getElementById("removeLike_userId").value,
        };

        try {
          const response = await fetch(`${getBaseUrl()}/like-dislike/remove`, {
            method: "DELETE",
            headers: getHeaders(),
            body: JSON.stringify(body),
          });

          const text = await response.text();
          const data = text ? JSON.parse(text) : { message: "Success" };
          displayResponse("removeLikeResponse", data, response.ok);
        } catch (error) {
          displayResponse(
            "removeLikeResponse",
            { error: error.message },
            false
          );
        }
      }

      async function shareContent() {
        const contentId = document.getElementById("share_contentId").value;
        const userId = document.getElementById("share_userId").value;

        try {
          const response = await fetch(
            `${getBaseUrl()}/share?contentId=${contentId}&userId=${userId}`,
            {
              method: "POST",
              headers: getHeaders(false),
            }
          );

          const text = await response.text();
          const data = text ? JSON.parse(text) : { message: "Success" };
          displayResponse("shareResponse", data, response.ok);
        } catch (error) {
          displayResponse("shareResponse", { error: error.message }, false);
        }
      }

      async function addComment() {
        const body = {
          contentId: document.getElementById("comment_contentId").value,
          userId: document.getElementById("comment_userId").value,
          userName: document.getElementById("comment_userName").value,
          comment: document.getElementById("comment_text").value,
        };

        try {
          const response = await fetch(`${getBaseUrl()}/comment/add`, {
            method: "POST",
            headers: getHeaders(),
            body: JSON.stringify(body),
          });

          const text = await response.text();
          const data = text
            ? JSON.parse(text)
            : { message: "Comment added successfully" };
          displayResponse("addCommentResponse", data, response.ok);
        } catch (error) {
          displayResponse(
            "addCommentResponse",
            { error: error.message },
            false
          );
        }
      }

      async function getComments() {
        const contentId = document.getElementById(
          "getComments_contentId"
        ).value;
        const page = document.getElementById("getComments_page").value;

        try {
          const response = await fetch(
            `${getBaseUrl()}/comments?contentId=${contentId}&page=${page}`,
            {
              headers: getHeaders(false),
            }
          );
          const data = await response.json();
          displayResponse("getCommentsResponse", data, response.ok);

          if (response.ok && data.content) {
            displayCommentsList(data.content);
          }
        } catch (error) {
          displayResponse(
            "getCommentsResponse",
            { error: error.message },
            false
          );
        }
      }

      async function enableContent() {
        const contentId = document.getElementById("enable_contentId").value;

        try {
          const response = await fetch(
            `${getBaseUrl()}/enable?contentId=${contentId}`,
            {
              method: "PUT",
              headers: getHeaders(false),
            }
          );

          const text = await response.text();
          const data = text
            ? JSON.parse(text)
            : { message: "Content enabled successfully" };
          displayResponse("enableResponse", data, response.ok);
        } catch (error) {
          displayResponse("enableResponse", { error: error.message }, false);
        }
      }

      async function disableContent() {
        const contentId = document.getElementById("disable_contentId").value;

        try {
          const response = await fetch(
            `${getBaseUrl()}/disable?contentId=${contentId}`,
            {
              method: "PUT",
              headers: getHeaders(false),
            }
          );

          const text = await response.text();
          const data = text
            ? JSON.parse(text)
            : { message: "Content disabled successfully" };
          displayResponse("disableResponse", data, response.ok);
        } catch (error) {
          displayResponse("disableResponse", { error: error.message }, false);
        }
      }

      async function deleteContent() {
        const contentId = document.getElementById("delete_contentId").value;

        if (!confirm("Are you sure you want to delete this content?")) return;

        try {
          const response = await fetch(
            `${getBaseUrl()}/delete?contentId=${contentId}`,
            {
              method: "DELETE",
              headers: getHeaders(false),
            }
          );

          const text = await response.text();
          const data = text
            ? JSON.parse(text)
            : { message: "Content deleted successfully" };
          displayResponse("deleteResponse", data, response.ok);
        } catch (error) {
          displayResponse("deleteResponse", { error: error.message }, false);
        }
      }

      function displayContentCard(containerId, content) {
        const container = document.getElementById(containerId);

        let mediaHtml = "";
        if (content.media) {
          const mediaType = content.mediaType || "image/jpeg";
          if (mediaType.startsWith("video/")) {
            mediaHtml = `<video controls style="max-width:100%;border-radius:10px;"><source src="data:${mediaType};base64,${content.media}" type="${mediaType}"></video>`;
          } else {
            mediaHtml = `<img src="data:${mediaType};base64,${content.media}" style="max-width:100%;border-radius:10px;">`;
          }
        }

        container.innerHTML = `
                <div class="content-card" style="max-width:500px;margin-top:20px;">
                    ${mediaHtml}
                    <div class="content-info">
                        <h4>${content.title || "Untitled"}</h4>
                        <p class="meta">By ${
                          content.displayName || content.userName || "Unknown"
                        } ‚Ä¢ ${formatDate(content.created)}</p>
                        <p>${content.bio || ""}</p>
                        <div class="stats">
                            <span>üëç ${content.likeCount || 0}</span>
                            <span>üëé ${content.dislikeCount || 0}</span>
                            <span>üí¨ ${content.commentCount || 0}</span>
                            <span>üîó ${content.shareCount || 0}</span>
                        </div>
                    </div>
                </div>
            `;
      }

      function displayContentGrid(containerId, contents) {
        const container = document.getElementById(containerId);

        container.innerHTML = contents
          .map((content) => {
            let mediaHtml = "";
            if (content.media) {
              const mediaType = content.mediaType || "image/jpeg";
              if (mediaType.startsWith("video/")) {
                mediaHtml = `<video><source src="data:${mediaType};base64,${content.media}" type="${mediaType}"></video>`;
              } else {
                mediaHtml = `<img src="data:${mediaType};base64,${content.media}">`;
              }
            } else {
              mediaHtml = `<div style="height:200px;background:#1a1a2e;display:flex;align-items:center;justify-content:center;">üì∑ No Media</div>`;
            }

            return `
                    <div class="content-card">
                        ${mediaHtml}
                        <div class="content-info">
                            <h4>${content.title || "Untitled"}</h4>
                            <p class="meta">By ${
                              content.displayName ||
                              content.userName ||
                              "Unknown"
                            } ‚Ä¢ ${formatDate(content.created)}</p>
                            <div class="stats">
                                <span>üëç ${content.likeCount || 0}</span>
                                <span>üëé ${content.dislikeCount || 0}</span>
                                <span>üí¨ ${content.commentCount || 0}</span>
                            </div>
                            <p class="helper-text">ID: ${content.id}</p>
                        </div>
                    </div>
                `;
          })
          .join("");
      }

      function displayCommentsList(comments) {
        const container = document.getElementById("commentsList");

        container.innerHTML = comments
          .map(
            (comment) => `
                <div class="comment-item">
                    <div class="comment-header">
                        <span class="username">@${
                          comment.userName || "Anonymous"
                        }</span>
                        <span class="time">${
                          comment.timeAgo || formatDate(comment.commentAt)
                        }</span>
                    </div>
                    <p class="comment-text">${comment.comment}</p>
                </div>
            `
          )
          .join("");
      }

      function formatDate(dateString) {
        if (!dateString) return "Unknown date";
        const date = new Date(dateString);
        return date.toLocaleDateString("en-US", {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      function generateUUID() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
          /[xy]/g,
          function (c) {
            const r = (Math.random() * 16) | 0;
            const v = c === "x" ? r : (r & 0x3) | 0x8;
            return v.toString(16);
          }
        );
      }

      document.addEventListener("DOMContentLoaded", () => {

        const testUserId = generateUUID();
        document.querySelectorAll('input[id*="_userId"]').forEach((input) => {
          if (!input.value) input.placeholder += ` (e.g., ${testUserId})`;
        });
      });
    </script>
  </body>
</html>
